var customSearch;!function(o){"use strict";const t=70;function a(e,a){a=a||t;const n=e.href?o(e.getAttribute("href")):o(e);o("html, body").animate({scrollTop:n.offset().top-a},400)}o(function(){var n;!function(){if(!window.subData)return;const e=o("header .wrapper"),t=o(".s-comment",e),n=o(".s-toc",e);e.find(".nav-sub .logo").text(window.subData.title);let s=document.body.scrollTop;o(document,window).scroll(()=>{const t=o(window).scrollTop(),a=t-s;a>=50&&t>100?(s=t,e.addClass("sub")):a<=-50&&(s=t,e.removeClass("sub"))});const c=o("#comments");c.length?t.click(e=>{e.preventDefault(),e.stopPropagation(),a(c)}):t.remove();const r=o(".toc-wrapper");r.length&&r.children().length?n.click(e=>{e.stopPropagation(),r.toggleClass("active")}):n.remove()}(),function(){var e=o("body .navgation");e.find("li a.active").removeClass("active");var t,a=location.pathname.replace(/\/|%/g,"");0==a.length&&(a="home");var n=a.match(/page\d{0,}$/g);n&&(n=n[0],a=a.split(n)[0]);var s,c=a.match(/index.html/);c&&(c=c[0],a=a.split(c)[0]),t=o("#"+a,e),(s=t)&&s.length&&s.addClass("active").siblings().removeClass("active")}(),(n=o(".l_header .switcher .s-menu")).click(function(e){e.stopPropagation(),o("body").toggleClass("z_menu-open"),n.toggleClass("active")}),o(document).click(function(e){o("body").removeClass("z_menu-open"),n.removeClass("active")}),function(){var t=o(".l_header .switcher .s-search"),a=o(".l_header"),n=o(".l_header .m_search");0!==t.length&&(t.click(function(e){e.stopPropagation(),a.toggleClass("z_search-open"),n.find("input").focus()}),o(document).click(function(e){a.removeClass("z_search-open")}),n.click(function(e){e.stopPropagation()}),a.ready(function(){a.bind("keydown",function(o){if(9==o.keyCode)return!1;var t,a,n=!!document.all;n?(t=window.event.keyCode,a=window.event):(t=e.which,a=e),9==t&&(n?(a.keyCode=0,a.returnValue=!1):(a.which=0,a.preventDefault()))})}))}(),function(){const e=o(".toc-wrapper");if(0===e.length)return;o(document).click(()=>e.removeClass("active")),e.on("click","a",o=>{o.preventDefault(),o.stopPropagation(),"A"===o.target.tagName?a(o.target):"SPAN"===o.target.tagName&&a(o.target.parentElement),e.removeClass("active")});const n=Array.from(e.find("li a")),s=()=>n.map(e=>Math.floor(o(e.getAttribute("href")).offset().top-t));let c=s();const r=()=>{const e=o("html").scrollTop()||o("body").scrollTop();if(!c)return;let t,a=0,s=c.length-1;for(;a<s;)c[t=a+s+1>>1]===e?a=s=t:c[t]<e?a=t:s=t-1;o(n).removeClass("active").eq(a).addClass("active")};o(window).resize(()=>{c=s(),r()}).scroll(()=>{r()}),r()}(),function(){const e=o(".s-top",".l_body");let t=document.body.scrollTop;const n=o(".l_header",".home-wrapper");o(document,window).scroll(()=>{const s=o(window).scrollTop(),c=s-t;s>150?(t=s,e.addClass("show"),c>0?e.removeClass("hl"):e.addClass("hl")):(t=s,e.removeClass("show").removeClass("hl")),e.click(()=>a(document.body)),s>document.body.clientHeight-100?n.addClass("show"):n.removeClass("show")})}(),setTimeout(function(){o("#loading-bar-wrapper").fadeOut(500)},300);const s=o(".menu .posts"),c=o(".l_body");s.length&&c&&s.click(e=>{e.preventDefault(),e.stopPropagation(),a(c)}),"google"===SEARCH_SERVICE?customSearch=new GoogleCustomSearch({apiKey:GOOGLE_CUSTOM_SEARCH_API_KEY,engineId:GOOGLE_CUSTOM_SEARCH_ENGINE_ID,imagePath:"/images/"}):"algolia"===SEARCH_SERVICE?customSearch=new AlgoliaSearch({apiKey:ALGOLIA_API_KEY,appId:ALGOLIA_APP_ID,indexName:ALGOLIA_INDEX_NAME,imagePath:"/images/"}):"hexo"===SEARCH_SERVICE?customSearch=new HexoSearch({imagePath:"/images/"}):"azure"===SEARCH_SERVICE?customSearch=new AzureSearch({serviceName:AZURE_SERVICE_NAME,indexName:AZURE_INDEX_NAME,queryKey:AZURE_QUERY_KEY,imagePath:"/images/"}):"baidu"===SEARCH_SERVICE&&(customSearch=new BaiduSearch({apiId:BAIDU_API_ID,imagePath:"/images/"}))})}(jQuery);